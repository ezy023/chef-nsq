[Unit]
Description=nsqd
After=network.target

[Service]
User=<%= node['nsq']['nsqd']['user'] %>
Group=<%= node['nsq']['nsqd']['user'] %>
<% if node['nsq']['nsqd']['filehandle_limit'] -%>
LimitNOFILE=<%= node['nsq']['nsqd']['filehandle_limit'] %>
<% end -%>
<% if node['nsq']['nsqd']['nproc'] -%>
LimitNPROC=<%= node['nsq']['nsqd']['nproc'] %>
<% end -%>
ExecStart=/srv/nsqd-start.sh
Environment=PATH=/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/sbin:/sbin:/bin
Restart=always
RestartSec=2



